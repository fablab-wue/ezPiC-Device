{{ include ../t_std_head.html }}

<h4>MQTT Configuration #{{index}} '{{NAME}}'</h4>

<form method="post">

  <button type="submit" class="btn btn-warning btn-lg float-right">Submit</button>

  <h4>
    <span class="badge badge-dark col-sm-12">Gateway</span>
  </h4>

  <div class="form-group row">
    <label for="NAME" class="col-sm-2">Gateway Name</label>
    <div class="col-sm-3">
      <input type="text" class="form-control" name="NAME" id="NAME" value="{{NAME}}">
    </div>
  </div>

  <div class="form-group row">
    <div class="col-sm-2 form-text">Enabled</div>
    <div class="col-sm-10">
      <div class="form-check">
        <label class="form-check-label form-text">
          <input class="form-check-input" type="checkbox" name="ENABLE" id="ENABLE" value="ACTIVE" {{if ENABLE}}checked{{end}}>
        </label>
      </div>
    </div>
  </div>


  <h4>
    <span class="badge badge-dark col-sm-12">MQTT Broker</span>
  </h4>

  <div class="form-group row">
    <label for="BrokerAddr" class="col-sm-2">IP address or URL</label>
    <div class="col-sm-7">
      <input type="text" class="form-control" name="BrokerAddr" id="BrokerAddr" value="{{BrokerAddr}}">
    </div>
  </div>

  <div class="form-group row">
    <label for="BrokerPort" class="col-sm-2 form-text">Port</label>
    <div class="input-group col-sm-2">
      <input type="number" min="1" max="65535" class="form-control" name="BrokerPort" id="BrokerPort" value="{{BrokerPort}}">
      <div class="input-group-append">
        <span class="input-group-text">sec</span>
      </div>
    </div>
    <div class="col-sm-7 form-text text-muted">Default: 1883</div>
  </div>

  <div class="form-group row">
    <label for="BrokerUser" class="col-sm-2">Login User</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" name="BrokerUser" id="BrokerUser" value="{{BrokerUser}}">
    </div>
    <div class="col-sm-5 form-text text-muted">Leave empty if no login required</div>
  </div>

  <div class="form-group row">
    <label for="BrokerPW" class="col-sm-2">Login Password</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" name="BrokerPW" id="BrokerPW" value="{{BrokerPW}}">
    </div>
  </div>


  <h4>
    <span class="badge badge-dark col-sm-12">Publish Triggers</span>
  </h4>

  <div class="form-group row">
    <label for="info" class="col-sm-2">Filter Patterns</label>
    <div class="col-sm-7">
      <textarea class="form-control" name="FILTER" id="FILTER" rows="5">{{FILTER}}</textarea>
      <div class="text-muted">Note: Use wildcard '*' at beginning and/or end.</div>
    </div>
  </div>

  <div class="form-group row">
    <label for="PubTopicPrefix" class="col-sm-2">Topic Prefix</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" name="PubTopicPrefix" id="PubTopicPrefix" value="{{PubTopicPrefix}}">
    </div>
  </div>

  <div class="form-group row align-items-center">
    <label for="PubQOS" class="col-sm-2">Publish QOS</label>
    <div class="col-sm-3">
      <select class="form-control" id="PubQOS" value="{{PubQOS}}">
        <option value="0">0 - At most once delivery</option>
        <option value="1">1 - At least once delivery</option>
        <option value="2">2 - Exactly once delivery</option>
      </select>
    </div>
  </div>


  <h4>
    <span class="badge badge-dark col-sm-12">Subscription</span>
  </h4>

  <div class="form-group row">
    <label for="SubTopic" class="col-sm-2">Topic (#)</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" name="SubTopic" id="SubTopic" value="{{SubTopic}}">
    </div>
  </div>

  <div class="form-group row">
    <label for="SubVarPrefix" class="col-sm-2">Variable Prefix</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" name="SubVarPrefix" id="SubVarPrefix" value="{{SubVarPrefix}}">
    </div>
  </div>

  <div class="form-group row align-items-center">
    <label for="SubQOS" class="col-sm-2">Subscribe QOS</label>
    <div class="col-sm-3">
      <select class="form-control" id="SubQOS" value="{{SubQOS}}">
        <option value="0">0 - At most once delivery</option>
        <option value="1">1 - At least once delivery</option>
        <option value="2">2 - Exactly once delivery</option>
      </select>
    </div>
  </div>


  <hr>
  
  <button type="submit" class="btn btn-warning btn-lg float-right">Submit</button>

</form>


{{ include ../t_std_foot.html }}